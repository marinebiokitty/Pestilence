%%%%%
%%
%% This file sets up the Abil datatype and creates Abil macros.  These
%% are for abilities that characters may have.
%%
%%%%%

\DECLARESUBTYPE{Abil}{Element}
\PRESETS{Abil}{
  \F\MYtext	%% text of ability, read by user
  \F\MYeffect	%% effect text of ability, read by recipient(s)
  }


%%%%%
%% \ability{<name>}{<text>}{<effect>}
%%
%% \ability is a wrapper around \INSTANCE, useful for 1-shot abilities,
%% etc.
\newinstance{Abil}{\ability[3]}{
  \s\MYname{#1}\s\MYtext{#2}\s\MYeffect{#3}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NEW{Abil}{\aTest}{
  \s\MYname	{Test Ability}
  \s\MYtext	{You are a test.}
  \s\MYeffect	{This is a Test.}
  }

\NEW{Abil}{\aSpecial}{
  \s\MYname	{Special Powers}
  \s\MYtext	{You have special powers, as detailed in your \gTest{}
		greensheet.}
  \s\MYeffect	{I have special powers!}
  \s\MYgreens	{\gTest{}}
  \suite
  }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%Magic abilities

%Shaman and Elder, start
\NEW{Abil}{\aRitualSacrifice}{
    \s\MYname	{Ritual Sacrifice}
    \s\MYtext	{Kill targeted character in order to appease the earth. To activate the ability, three player characters must form a triangle around the victim for 5 uninterrupted minutes. Not all in the triangle need to have this ability. Victim is trapped within the triangle as long as no part of the triangle steps away or gets attacked. Victim does not need to be conscious for the ritual to start. At the end of 5 minutes, ask the victim if they are willing to give themselves to the earth. Regardless of the answer, the victim is sacrificed. Interruption resets timer.}
    \s\MYeffect	{You see me chanting over someone with a bone dagger in hand}
	\s\MYnumber {9221}    
}

%Elder, Rebel, Plaguebearer, start
\NEW{Abil}{\aPrestidigitation}{
	\s\MYname	{Prestidigitation}
	\s\MYtext	{Some harmless, minor magic. Declare what you're doing to everyone in the same room.}
	\s\MYeffect	{You see me creating light and butterflies from nowhere}
	\s\MYnumber {7690}	
}

%Shaman, Elder, Rebel, start. Apprentice, acquirable
\NEW{Abil}{\aTrueSight}{
	\s\MYname	{True Sight}
	\s\MYtext	{You are able to see those who are not bound to a body. However, you cannot hear them.}
	\s\MYeffect	{I can see ghosts and spirits}
	\s\MYnumber {1036}	
}

%Elder, start. Apprentice, acquirable
\NEW{Abil}{\aEntrapment}{
	\s\MYname	{Entrapment}
	\s\MYtext	{You may bind the earth spirit to any object. For this to work, the earth spirit must not be bound to a body or another object. The earth spirit is paralyzed at the start of ability. From there, the entrapment will take 3 uninterrupted minutes to complete. Once the ritual is successful, the earth spirit must remain within two ZOCs of the object it's bound to and obey every feasible command made by the one who wields that object.}
	\s\MYeffect	{If you are a formless earth spirit, you are paralyzed. People without True Sight see me casting an unknown spell.}
	\s\MYnumber {7694}	
}

%Rebel and Shaman, start
\NEW{Abil}{\aBloodSorcery}{
	\s\MYname	{Blood Sorcery}
	\s\MYtext	{Blood has its own power. You know its ways even without a spirit's help. You can sacrifice one portion of your own blood or one vial of extracted blood in order to gain +1 CR for five minutes. The ability is obviously magical in nature. Describe accordingly to onlookers}
	\s\MYeffect	{Tendrils of blood crawl over my hands}
	\s\MYnumber {7694}	
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%Medical abilities

%Plaguebearer, start. Everyone else, acquirable after infection
\NEW{Abil}{\aSpreadPlague}{
	\s\MYname	{Spread Plague}
	\s\MYtext	{Put a sticker on a PC or NPC to infect them. The sticker doesn't have to be on a name badge; the infected must arrange that themselves once they know they're infected. You may use this ability even if restrained, provided you are close enough to your target to put a sticker on them.}
	\s\MYeffect	{You feel your throat swell and your temperature rise. You are infected.}
	\s\MYnumber {7695}	
}

%Plaguebearer, start
\NEW{Abil}{\aImmunity}{
	\s\MYname	{Immunity}
	\s\MYtext	{You are not affected by the plague. You may choose to either display symptoms (have a sticker on your name badge) or not. Cures cannot take away your ability to spread the plague.}
	\s\MYeffect	{I am unaffected by your cure}
	\s\MYnumber {7695}	
}

%Rebel, acquirable
\NEW{Abil}{\aCure}{
	\s\MYname	{Cure Infection}
	\s\MYtext	{You can cure the plague. For 3 minutes, you work to shut down the plague's nexus within the target's body. At the end, show the card to your target. Interruption resets timer. You may cure yourself with this ability.}
	\s\MYeffect	{You are no longer infected. You are restored to your original CR and are unable to spread the plague.}
	\s\MYnumber {7695}	
}

%Plaguebearer, acquirable
\NEW{Abil}{\aSalvation}{
	\s\MYname	{Salvation}
	\s\MYtext	{You can instantaneously cure the plague. Show the card to your target.}
	\s\MYeffect	{You are no longer infected. You are restored to your original CR and are unable to spread the plague.}
	\s\MYnumber {7695}	
}

%Outsider and Apprentice, start
\NEW{Abil}{\aFirstAid}{
	\s\MYname	{First Aid}
	\s\MYtext	{You have EMT training. For a minute, you work to save a wounded person through non-magical means. Show this card to target at the end. Interruption resets timer.}
	\s\MYeffect	{You are no longer wounded. You may wake up after 2 minutes}
	\s\MYnumber {7173}
}

%Outsider and Apprentice, start 
\NEW{Abil}{\aDrawBlood}{
	\s\MYname	{Draw Blood}
	\s\MYtext	{To draw blood, show this card to a consenting, wounded or unconscious character. Perform an interruptible 5 count, take their blood and mark it with a check. You may draw blood from yourself. If you use this ability without alcohol on your person, roll a d6. If you roll 2 or less, the target of this ability is infected. Inform the target if this happens. Using this ability does not consume alcohol. You cannot draw blood from the same person less than 5 minutes after you've taken blood from them}
	\s\MYeffect	{I take one portion of blood from you}
	\s\MYnumber {7173}
}

%Shaman, start. Plaguebearer and Rebel, acquirable
\NEW{Abil}{\aFaithHealing}{
	\s\MYname	{Faith Healing}
	\s\MYtext	{For a minute, you use your immense spiritual power in order to save a wounded person. Inform onlookers that the ability is magical in nature. Show this card to target at the end. Interruption resets timer.}
	\s\MYeffect	{You are no longer wounded. You may wake up after 2 minutes}
	\s\MYnumber {7173}
}

%Apprentice and Outsider, acquirable
\NEW{Abil}{\aMakePotion}{
	\s\MYname	{MakePotion}
	\s\MYtext	{You know how to reproduce potion 0012. Gather 2 vials of uninfected blood and 5 copper coins to melt. The rest of the ingredients are easily accessible to you. Once you have the ingredients, you may destroy them and get item 0012 from Envelope X}
	\s\MYeffect	{I'm stirring melted copper into a nasty black substance.}
	\s\MYnumber {7173}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%Clay-related abilities

%Shaman, start
\NEW{Abil}{\aCraftBody}{
	\s\MYname	{Craft Body}
	\s\MYtext	{You can spend 1 minute by the clay mound in the garden to craft a new body for the earth spirit. Interruption resets timer.}
	\s\MYeffect	{You see me creating some form of clay sculpture}
	\s\MYnumber {7173}
}

%Plaguebearer, start
\NEW{Abil}{\aImmortalSpirit}{
	\s\MYname	{Immortal Spirit}
	\s\MYtext	{Your body disintegrates into clay when you are killed or when you will it. Until you can inhabit a new clay body, you may wear a yellow headband and spy on others. Only characters with True Sight can detect you in this form. You cannot attack, assist or be attacked when formless, but you can spread infection}
	\s\MYeffect	{You see my body dissolve into clay}
	\s\MYnumber {7173}
}

%Plaguebearer, acquirable
\NEW{Abil}{\aReturnToEarth}{
	\s\MYname	{Return To Earth}
	\s\MYtext	{Wear a red headband at the start of the ability. 3 minutes after you activate the ability, you melt back into the earth, and you are removed from game. Your body and all the items on you are destroyed. Combat resets timer. Nothing else can interrupt this ritual.}
	\s\MYeffect	{You see a figure wreathed in flames, chanting.}
	\s\MYnumber {7173}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


  
%% Basic DarkWater-style Martial Attack abilities


%% Everyone has these 5
\NEW{Abil}{\aAssist}{
    \s\MYname	{Assist}
    \s\MYtext	{You can assist someone else's attack.  You must be
    		within ZoC of both the attacker and target.  Within two
    		seconds of an attack, direct this at the attacker,
    		saying ``\MYname'' and your CR.}
    \s\MYeffect	{I assist your attack.}
	\s\MYnumber {2063}    
}

\NEW{Abil}{\aKnockOut}{
    \s\MYname	{Knock Out}
    \s\MYtext	{You can knock someone out as an attack.  This requires
    		a {\bf blunt} weapon.  Say ``\MYname'' and your CR.}
    \s\MYeffect	{I knock you out.}
	\s\MYnumber {3603}    
}

\NEW{Abil}{\aWound}{
    \s\MYname	{Wound}
    \s\MYtext	{You can wound someone as an attack. Say ``\MYname'' and
    		your CR.}
    \s\MYeffect	{I wound you.}
	\s\MYnumber {7188}    
}

\NEW{Abil}{\aKillingBlow}{
    \s\MYname	{Killing Blow}
    \s\MYtext	{You can perform a killing blow on someone else after an audible, interruptible 10-count. The target must be helpless (unconscious, wounded, or restrained). All NPC targets are considered helpless.}
    \s\MYeffect	{I perform a killing blow on you after a 10-count. ``Killing blow 1, killing blow 2, ..." You are dead.}
	\s\MYnumber {1294}		
}

\NEW{Abil}{\aRestrain}{
    \s\MYname	{Restrain}
    \s\MYtext	{You can restrain someone as an attack.  Say ``\MYname''
    		and your CR.  You may freely drag, attack, or (if you have
    		a weapon) killing-blow them.  To do anything else, or if
    		your health state changes, incant ``release'' and let them
    		go.}
    \s\MYeffect	{I restrain you.  You are restrained until I incant
    		``release.''}
	\s\MYnumber {9242}		
}

%% the \basecombat macro can be prepended to the Char abils list
%% (in char-LIST.tex)
\def\basecombat{\aKnockOut{}\aWound{}\aAssist{}\aKillingBlow{}\aRestrain}
  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
